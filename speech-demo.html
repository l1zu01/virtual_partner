<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>语音转文字功能演示 - 灵犀一言</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, 
                #fef7f0 0%,
                #fdf2e6 25%,
                #f8f4f0 50%,
                #e8f4fd 75%,
                #d4e7f4 100%
            );
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        h1 {
            color: #8b6f47;
            font-size: 2.5rem;
            margin-bottom: 30px;
            font-weight: 300;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
            text-align: left;
        }
        
        .feature-card h2 {
            color: #8b6f47;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 400;
        }
        
        .feature-list {
            color: #8b7d6f;
            line-height: 1.6;
        }
        
        .feature-list li {
            margin-bottom: 10px;
            padding-left: 10px;
        }
        
        .api-code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .highlight {
            background: rgba(212, 197, 169, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .btn {
            background: linear-gradient(135deg, #d4c5a9, #b8a082);
            color: white;
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 12px;
            font-weight: 500;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(212, 197, 169, 0.3);
            margin-top: 20px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 197, 169, 0.4);
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin: 10px 5px;
        }
        
        .status-supported {
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
            border: 1px solid rgba(40, 167, 69, 0.2);
        }
        
        .status-unsupported {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
            border: 1px solid rgba(220, 53, 69, 0.2);
        }
        
        .warning {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎤 语音转文字功能集成说明</h1>
        
        <div class="feature-card">
            <h2>🚀 功能特性</h2>
            <ul class="feature-list">
                <li><strong>实时语音识别</strong>：使用浏览器内置的Web Speech API进行实时语音转文字</li>
                <li><strong>中文优化</strong>：专门针对中文语音识别进行了优化配置</li>
                <li><strong>AI模型集成</strong>：识别结果直接发送给本地部署的AI模型</li>
                <li><strong>语音合成</strong>：AI回复支持语音播放，实现完整的语音对话体验</li>
                <li><strong>备用方案</strong>：当浏览器不支持语音识别时，自动切换到录音模式</li>
                <li><strong>错误处理</strong>：完善的错误处理和用户提示机制</li>
            </ul>
        </div>
        
        <div class="feature-card">
            <h2>🔧 技术实现</h2>
            <p><strong>语音识别配置：</strong></p>
            <div class="api-code">
recognition.continuous = true      // 持续识别
recognition.interimResults = true  // 显示中间结果
recognition.lang = 'zh-CN'         // 中文识别
recognition.maxAlternatives = 1    // 最佳结果
            </div>
            
            <p><strong>AI模型API调用：</strong></p>
            <div class="api-code">
POST http://localhost:25674/chat/
{
  "message": "用户语音转换的文字",
  "user_id": "用户ID"
}
            </div>
            
            <p><strong>语音合成配置：</strong></p>
            <div class="api-code">
utterance.lang = 'zh-CN'    // 中文语音
utterance.rate = 0.9        // 语速
utterance.pitch = 1.1       // 音调
utterance.volume = 0.8      // 音量
            </div>
        </div>
        
        <div class="feature-card">
            <h2>🌟 用户体验优化</h2>
            <ul class="feature-list">
                <li><strong>视觉反馈</strong>：录音时显示声波动画，处理时显示思考动画</li>
                <li><strong>状态提示</strong>：清晰的文字提示当前操作状态</li>
                <li><strong>虚拟伙伴</strong>：AI说话时虚拟形象会有相应的视觉效果</li>
                <li><strong>响应式设计</strong>：在不同设备上都有良好的体验</li>
                <li><strong>智能超时</strong>：30秒自动停止录音，避免资源浪费</li>
            </ul>
        </div>
        
        <div class="feature-card">
            <h2>🔍 浏览器兼容性检测</h2>
            <p>当前浏览器语音功能支持状态：</p>
            <div id="compatibility-status"></div>
            
            <div class="warning">
                <strong>💡 使用建议：</strong><br>
                为了获得最佳的语音识别体验，建议使用 <span class="highlight">Chrome 浏览器</span> 或其他基于 Chromium 的浏览器。Firefox 和 Safari 对语音识别的支持可能有限。
            </div>
        </div>
        
        <div class="feature-card">
            <h2>📋 使用流程</h2>
            <ol class="feature-list">
                <li>用户点击麦克风按钮开始录音</li>
                <li>浏览器请求麦克风权限（首次使用）</li>
                <li>开始实时语音识别，显示"正在语音识别..."</li>
                <li>识别完成后，文字内容发送给本地AI模型</li>
                <li>AI模型处理并返回回复</li>
                <li>显示AI回复文字，同时播放语音</li>
                <li>虚拟伙伴表情和动画同步变化</li>
            </ol>
        </div>
        
        <a href="#" class="btn" onclick="openConversation()">🚀 立即体验语音对话</a>
    </div>

    <script>
        // 检测浏览器兼容性
        function checkCompatibility() {
            const statusContainer = document.getElementById('compatibility-status');
            let statusHTML = '';
            
            // 检测语音识别
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                statusHTML += '<div class="status-indicator status-supported">✅ 语音识别：支持</div>';
            } else {
                statusHTML += '<div class="status-indicator status-unsupported">❌ 语音识别：不支持</div>';
            }
            
            // 检测语音合成
            if ('speechSynthesis' in window) {
                statusHTML += '<div class="status-indicator status-supported">✅ 语音合成：支持</div>';
            } else {
                statusHTML += '<div class="status-indicator status-unsupported">❌ 语音合成：不支持</div>';
            }
            
            // 检测媒体录制
            if ('mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices) {
                statusHTML += '<div class="status-indicator status-supported">✅ 音频录制：支持</div>';
            } else {
                statusHTML += '<div class="status-indicator status-unsupported">❌ 音频录制：不支持</div>';
            }
            
            statusContainer.innerHTML = statusHTML;
        }
        
        function openConversation() {
            // 这里可以跳转到对话界面
            alert('语音对话功能已集成到 ConversationNew.vue 中，请在Vue应用中访问 /conversation-new 路由体验完整功能！');
        }
        
        // 页面加载时检测兼容性
        window.onload = checkCompatibility;
    </script>
</body>
</html>
